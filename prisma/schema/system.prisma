// System Management Models
// Audit trails, settings, and system configuration

// Audit Trail - Track all system changes for compliance
model AuditLog {
  id        String      @id @default(cuid())
  adminId   String
  action    AuditAction // CREATE, UPDATE, DELETE, LOGIN, LOGOUT
  entity    String      // Table/Model name (e.g., "Booking", "Guest")
  entityId  String      // Record ID that was affected
  oldValues Json?       // Previous values before change
  newValues Json?       // New values after change
  ipAddress String?     // IP address of the admin
  userAgent String?     // Browser/client information
  createdAt DateTime    @default(now())

  // Relations
  admin     Admin       @relation(fields: [adminId], references: [id])

  @@index([adminId])
  @@index([entity, entityId])
  @@index([createdAt])
  @@index([action])
  @@map("audit_logs")
}

// System Settings - Configurable application parameters
model Settings {
  id        String   @id @default(cuid())
  key       String   @unique // Setting identifier (e.g., "hotel_name", "tax_rate")
  value     Json     // Setting value (can be string, number, object, array)
  category  String?  // Setting category for organization ("general", "payment", "email")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([category])
  @@map("settings")
}